buildscript{
   repositories{
      mavenLocal()
      maven{url "https://repo1.maven.org/maven2"}
   }
}

plugins{
   id 'org.openapi.generator' version '6.2.1'
   id 'maven-publish'
   id 'java-gradle-plugin'
}

openApiGenerate{
   generatorName = "java"
   inputSpec = "$rootDir/src/main/resources/openapi.yaml".toString()
   outputDir = "$buildDir/generated".toString()
   apiPackage = "org.lankheet.iot.api"
   invokerPackage = "org.lankheet.iot.invoker"
   modelPackage = "org.lankheet.iot.model"
   configOptions = [
      dateLibrary      : "java8",
      serializableModel: "true",
      artifactId       : rootProject.name,
      interfaceOnly    : "true"
   ]
}

compileJava.dependsOn('openApiGenerate')

sourceSets{
   main{
      java{
         srcDir "$buildDir/generated/src/main/java"
      }
   }
}

dependencies{
   compileOnly 'javax:javaee-api:7.0'
   compileOnly 'io.swagger:swagger-jaxrs:1.6.6'
   implementation group: 'com.google.code.gson', name: 'gson', version: '2.10'
   implementation group: 'com.squareup.okhttp3', name: 'okhttp', version: '4.10.0'
   implementation group: 'com.squareup.okhttp3', name: 'logging-interceptor', version: '4.10.0'
   implementation group: 'io.gsonfire', name: 'gson-fire', version: '1.8.5'

}
